@{
    ViewBag.Title = "Product Grid";
}

<link href="~/lib/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
<script src="~/lib/jquery/dist/jquery.min.js"></script>
<script src="~/lib/bootstrap/dist/js/bootstrap.min.js" type="text/javascript"></script>

<style>
    .product-image {
        height: 200px;
        object-fit: contain;
        width: 100%;
    }

    .card {
        height: 100%;
    }

    .card-body {
        display: flex;
        flex-direction: column;
        height: 100%;
    }

    .btn {
        margin-top: auto;
    }
</style>

<div id="productGrid" class="container">
   
    <div class="row" id="productGridRow">
       
    </div>
</div>

<script type="text/javascript">
    $(document).ready(function () {

        
        function loadProducts() {
            $.ajax({
                url: "/Products/Grid",  
                type: 'GET',
                success: function (data) {
                    var productHtml = '';

                    data.forEach(function (card) {
                        productHtml += ProductCard(card);
                    });

                   
                    $('#productGridRow').html(productHtml);
                },
                error: function () {
                    alert("An error occurred while loading products.");
                }
            });
        }

       
        function ProductCard(card) {
            return `
                <div class="col-12 col-sm-6 col-md-4 mb-4">
                    <div class="card h-100">
                        <img src="${card.imageUrl}" class="card-img-top product-image" alt="${card.title}" />
                        <div class="card-body d-flex flex-column">
                            <h5 class="card-title">${card.title}</h5>
                            <p class="card-text">₹ ${card.price}</p>
                            <a href="#" class="btn btn-primary mt-auto">View Details</a>
                        </div>
                    </div>
                </div>
            `;
        }

       
        loadProducts();
    });
</script>

