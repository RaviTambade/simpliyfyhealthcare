@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
    ViewData["Title"] = "Account";
}

<h1>Accounts</h1>
<script src="~/lib/jquery/dist/jquery.min.js"></script>
<table class="table table-bordered" id="accountsTable">
    <thead>
        <tr>
            <th>AccountId</th>
            <th>Passcode</th>
            <th>UserId</th>
            <th>AccountNumber</th>
            <th>BankName</th>
            <th>IFSCCode</th>
            <th> Balance</th>
        </tr>
    </thead>
    <tbody>
        <!-- Table rows will be inserted here dynamically -->
    </tbody>
</table>

<script>

    $(document).ready(function () {

        // Make an AJAX call to the API to get payment data

        $.ajax({

            url: 'http://localhost:5218/api/bank', // Replace with your API URL

            type: 'GET',

            dataType: 'json',

            success: function (data) {
                console.log(data);

                var tableBody = $('#accountsTable tbody');

                tableBody.empty(); // Clear existing rows

                // Check if data is not empty

                if (data.length > 0) {

                    // Loop through the payment data and append rows to the table

                    $.each(data, function (index, account) {

                        var row = '<tr>' +

                            '<td>' + account.accountId + '</td>' +

                            '<td>' + account.passcode + '</td>' +

                            '<td>' +account.userId + '</td>' +

                            '<td>' + account.accountNumber + '</td>' +

                            '<td>' + account.bankName + '</td>' +

                            '<td>' + account.ifscCode + '</td>' +

                            '<td>' + account.balance + '</td>' +

                            '</tr>';

                        tableBody.append(row);

                    });

                }
                else {

                    // If no data, show a message

                    tableBody.append('<tr><td colspan="7">No accounts found.</td></tr>');

                }

            },

            error: function (xhr, status, error) {

                // Handle error

                alert('An error occurred: ' + error);

            }

        });

    });
</script>